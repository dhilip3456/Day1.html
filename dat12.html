<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>
<body>
  <script>
    // A Set is a collection of unique values and removes duplicates automatically

    // Corrected: 'Set' must be capitalized
    let email = new Set();

    email.add("js@gmail.com");
    email.add("python@gmail.com");
    email.add("java@gmail.com");
    console.log(email); // Set(3) {"js@gmail.com", "python@gmail.com", "java@gmail.com"}

    email.delete("java@gmail.com");
    console.log(email); // Set(2) {"js@gmail.com", "python@gmail.com"}

    email.clear();
    console.log(email); // Set(0) {}

    // Adding some emails again for iteration demonstration
    email.add("js@gmail.com");
    email.add("python@gmail.com");

    // for...of loop to iterate over set
    for (let mailId of email) {
      console.log(mailId);
    }

    // forEach loop on Set
    email.forEach(x => {
      console.log(x);
    });

    // Role based access using Set
    let adminPermission = new Set(["read", "write", "delete"]);
    let userPermission = new Set(["read"]);

    function hasPermission(role, permission) {
      return role.has(permission);
    }

    console.log(hasPermission(adminPermission, "delete")); // true
    console.log(hasPermission(userPermission, "delete"));  // false

    // Union, intersection, difference using Sets
    let setA = new Set([1, 2, 3, 4, 5, 1]); // duplicate '1' ignored
    let setB = new Set([6, 7, 8, 9, 2, 10]);

    // Union
    let union = new Set([...setA, ...setB]);
    console.log("Union:", union);

    // Intersection
    let intersection = new Set([...setA].filter(x => setB.has(x)));
    console.log("Intersection:", intersection);

    // Difference (setA - setB)
    let difference = new Set([...setA].filter(x => !setB.has(x)));
    console.log("Difference:", difference);

    // Using WeakMap with objects as keys
    let user1 = { name: "java" };
    let user2 = { name: "python" };

    let map = new WeakMap();
    map.set(user1, "welcome");
    map.set(user2, "hai python");

    // Cannot iterate WeakMap — only access by keys
    console.log(map.get(user1)); // "welcome"
    console.log(map.get(user2)); // "hai python"
  </script>
</body>
</html>
